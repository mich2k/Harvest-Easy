import*as e from"react";import{useLayoutEffect as t,useEffect as n,useRef as r}from"react";import{hideOthers as o}from"aria-hidden";import{tabbable as u}from"tabbable";import{createPortal as c,flushSync as i}from"react-dom";import{getOverflowAncestors as l,offset as s,detectOverflow as a,useFloating as f}from"@floating-ui/react-dom";export*from"@floating-ui/react-dom";var d="undefined"!=typeof document?t:n;let m=!1,v=0;const p=()=>"floating-ui-"+v++;const g=e["useId".toString()]||function(){const[t,n]=e.useState((()=>m?p():void 0));return d((()=>{null==t&&n(p())}),[]),e.useEffect((()=>{m||(m=!0)}),[]),t};function b(){const e=new Map;return{emit(t,n){var r;null==(r=e.get(t))||r.forEach((e=>e(n)))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){e.set(t,(e.get(t)||[]).filter((e=>e!==n)))}}}const h=e.createContext(null),y=e.createContext(null),w=()=>{var t;return(null==(t=e.useContext(h))?void 0:t.id)||null},E=()=>e.useContext(y),R=e=>{const t=g(),n=E(),r=w(),o=e||r;return d((()=>{const e={id:t,parentId:o};return null==n||n.addNode(e),()=>{null==n||n.removeNode(e)}}),[n,t,o]),t},x=t=>{let{children:n,id:r}=t;const o=w();return e.createElement(h.Provider,{value:e.useMemo((()=>({id:r,parentId:o})),[r,o])},n)},I=t=>{let{children:n}=t;const r=e.useRef([]),o=e.useCallback((e=>{r.current=[...r.current,e]}),[]),u=e.useCallback((e=>{r.current=r.current.filter((t=>t!==e))}),[]),c=e.useState((()=>b()))[0];return e.createElement(y.Provider,{value:e.useMemo((()=>({nodesRef:r,addNode:o,removeNode:u,events:c})),[r,o,u,c])},n)};function k(e){return(null==e?void 0:e.ownerDocument)||document}function T(){const e=navigator.userAgentData;return null!=e&&e.platform?e.platform:navigator.platform}function C(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map((e=>{let{brand:t,version:n}=e;return t+"/"+n})).join(" "):navigator.userAgent}function M(e){return k(e).defaultView||window}function L(e){return!!e&&e instanceof M(e).Element}function A(e){return!!e&&e instanceof M(e).HTMLElement}function O(e){if(0===e.mozInputSource&&e.isTrusted)return!0;const t=/Android/i;return(t.test(T())||t.test(C()))&&e.pointerType?"click"===e.type&&1===e.buttons:0===e.detail&&!e.pointerType}function S(e){return 0===e.width&&0===e.height||1===e.width&&1===e.height&&0===e.pressure&&0===e.detail&&"mouse"!==e.pointerType||e.width<1&&e.height<1&&0===e.pressure&&0===e.detail}function P(){return/apple/i.test(navigator.vendor)}function D(){return T().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function F(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}function K(e,t){if(!e||!t)return!1;const n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&(r=n,"undefined"!=typeof ShadowRoot&&(r instanceof M(r).ShadowRoot||r instanceof ShadowRoot))){let n=t;do{if(n&&e===n)return!0;n=n.parentNode||n.host}while(n)}var r;return!1}function N(e,t){let n=e.filter((e=>{var n;return e.parentId===t&&(null==(n=e.context)?void 0:n.open)}))||[],r=n;for(;r.length;)r=e.filter((e=>{var t;return null==(t=r)?void 0:t.some((t=>{var n;return e.parentId===t.id&&(null==(n=e.context)?void 0:n.open)}))}))||[],n=n.concat(r);return n}function H(e){return"composedPath"in e?e.composedPath()[0]:e.target}const j="http://www.w3.org/2000/svg";function B(e){e.current&&(e.current.remove(),e.current=null)}function V(e){let t,{restMs:n=0,buffer:r=.5,blockPointerEvents:o=!0}=void 0===e?{}:e,u=!1,c=!1;return e=>{let{x:i,y:l,placement:s,refs:a,onClose:f,nodeId:d,tree:m,polygonRef:v}=e;return function(e){var p;function g(){B(v),clearTimeout(t),f()}if(clearTimeout(t),!a.domReference.current||!a.floating.current||null==s||null==i||null==l)return;const{clientX:b,clientY:h}=e,y=H(e),w="mouseleave"===e.type,E=K(a.domReference.current,y),R=K(a.floating.current,y);if(!w&&E)return void B(v);if(!w&&(E||u&&K(v.current,y)))return;if(w&&L(e.relatedTarget)&&K(a.floating.current,e.relatedTarget))return;if(m&&N(m.nodesRef.current,d).some((e=>{let{context:t}=e;return null==t?void 0:t.open})))return;if(R&&(c=!0),R&&!w&&"rect"!==(null==(p=v.current)?void 0:p.dataset.type))return void B(v);const x=a.domReference.current.getBoundingClientRect(),I=a.floating.current.getBoundingClientRect(),T=s.split("-")[0],C=i>I.right-I.width/2,M=l>I.bottom-I.height/2;if("top"===T&&l>=x.bottom-1||"bottom"===T&&l<=x.top+1||"left"===T&&i>=x.right-1||"right"===T&&i<=x.left+1)return g();let A=[];switch(T){case"top":A=[[I.left,x.top+1],[I.left,I.bottom-1],[I.right,I.bottom-1],[I.right,x.top+1]],u=b>=I.left&&b<=I.right&&h>=I.top&&h<=x.top+1;break;case"bottom":A=[[I.left,I.top+1],[I.left,x.bottom-1],[I.right,x.bottom-1],[I.right,I.top+1]],u=b>=I.left&&b<=I.right&&h>=x.bottom-1&&h<=I.bottom;break;case"left":A=[[I.right-1,I.bottom],[I.right-1,I.top],[x.left+1,I.top],[x.left+1,I.bottom]],u=b>=I.left&&b<=x.left+1&&h>=I.top&&h<=I.bottom;break;case"right":A=[[x.right-1,I.bottom],[x.right-1,I.top],[I.left+1,I.top],[I.left+1,I.bottom]],u=b>=x.right-1&&b<=I.right&&h>=I.top&&h<=I.bottom}const O=u?A:function(e){let[t,n]=e;const o=I.width>x.width,u=I.height>x.height;switch(T){case"top":return[[o?t+r/2:C?t+4*r:t-4*r,n+r+1],[o?t-r/2:C?t+4*r:t-4*r,n+r+1],...[[I.left,C||o?I.bottom-r:I.top],[I.right,C?o?I.bottom-r:I.top:I.bottom-r]]];case"bottom":return[[o?t+r/2:C?t+4*r:t-4*r,n-r],[o?t-r/2:C?t+4*r:t-4*r,n-r],...[[I.left,C||o?I.top+r:I.bottom],[I.right,C?o?I.top+r:I.bottom:I.top+r]]];case"left":{const e=[t+r+1,u?n+r/2:M?n+4*r:n-4*r],o=[t+r+1,u?n-r/2:M?n+4*r:n-4*r];return[...[[M||u?I.right-r:I.left,I.top],[M?u?I.right-r:I.left:I.right-r,I.bottom]],e,o]}case"right":return[[t-r,u?n+r/2:M?n+4*r:n-4*r],[t-r,u?n-r/2:M?n+4*r:n-4*r],...[[M||u?I.left+r:I.right,I.top],[M?u?I.left+r:I.right:I.left+r,I.bottom]]]}}([i,l]);if(!v.current&&o&&w){const e=k(a.floating.current);v.current=function(e,t,n){var r,o;const u=P(),c=t.defaultView||window,i=t.createElementNS(j,"svg");Object.assign(i.style,{position:"fixed",left:(u&&(null==(r=c.visualViewport)?void 0:r.offsetLeft)||0)+"px",top:(u&&(null==(o=c.visualViewport)?void 0:o.offsetTop)||0)+"px",width:"100%",height:"100%",pointerEvents:"none",zIndex:2147483647}),i.setAttribute("data-type",n?"rect":"triangle");const l=t.createElementNS(j,"polygon");return l.setAttribute("points",e.map((e=>{let[t,n]=e;return t+","+n})).join(" ")),Object.assign(l.style,{pointerEvents:"auto",fill:"transparent",opacity:0}),i.appendChild(l),i}(O,e,u),e.body.appendChild(v.current)}u||(!function(e,t){const[n,r]=e;let o=!1;const u=t.length;for(let e=0,c=u-1;e<u;c=e++){const[u,i]=t[e]||[0,0],[l,s]=t[c]||[0,0];i>=r!=s>=r&&n<=(l-u)*(r-i)/(s-i)+u&&(o=!o)}return o}([b,h],O)?g():n&&!c&&(t=setTimeout(f,n)))}}}function W(e){const t=r(e);return d((()=>{t.current=e})),t}function q(e,t,n){return n&&!F(n)?0:"number"==typeof e?e:null==e?void 0:e[t]}const z=function(t,n){let{enabled:r=!0,delay:o=0,handleClose:u=null,mouseOnly:c=!1,restMs:i=0,move:l=!0}=void 0===n?{}:n;const{open:s,onOpenChange:a,dataRef:f,events:m,refs:v,_:p}=t,g=E(),b=W(u),h=W(o),y=e.useRef(),w=e.useRef(),R=e.useRef(),x=e.useRef(),I=e.useRef(!0),T=e.useRef(null),C=e.useCallback((()=>{var e;const t=null==(e=f.current.openEvent)?void 0:e.type;return(null==t?void 0:t.includes("mouse"))&&"mousedown"!==t}),[f]);e.useEffect((()=>{if(r)return m.on("dismiss",e),()=>{m.off("dismiss",e)};function e(){clearTimeout(w.current),clearTimeout(x.current),I.current=!0}}),[r,m,v]),e.useEffect((()=>{if(!r||!b.current||!s)return;function e(){C()&&a(!1)}const t=k(v.floating.current).documentElement;return t.addEventListener("mouseleave",e),()=>{t.removeEventListener("mouseleave",e)}}),[v,s,a,r,b,f,C]);const M=e.useCallback((function(e){void 0===e&&(e=!0);const t=q(h.current,"close",y.current);t&&!R.current?(clearTimeout(w.current),w.current=setTimeout((()=>a(!1)),t)):e&&(clearTimeout(w.current),a(!1))}),[h,a]),A=e.useCallback((()=>{R.current&&(k(v.floating.current).removeEventListener("mousemove",R.current),R.current=void 0)}),[v]);return e.useEffect((()=>{if(!r)return;function e(){return!!f.current.openEvent&&["click","mousedown"].includes(f.current.openEvent.type)}function n(e){if(clearTimeout(w.current),I.current=!1,c&&!F(y.current)||i>0&&0===q(h.current,"open"))return;f.current.openEvent=e;const t=q(h.current,"open",y.current);t?w.current=setTimeout((()=>{a(!0)}),t):a(!0)}function o(n){if(e())return;const r=k(v.floating.current);if(clearTimeout(x.current),b.current)return clearTimeout(w.current),R.current&&r.removeEventListener("mousemove",R.current),R.current=b.current({...t,tree:g,polygonRef:T,x:n.clientX,y:n.clientY,onClose(){A(),M()}}),void r.addEventListener("mousemove",R.current);M()}function u(n){e()||null==b.current||b.current({...t,tree:g,polygonRef:T,x:n.clientX,y:n.clientY,onClose(){A(),M()}})(n)}const d=v.floating.current,m=v.domReference.current;return L(m)?(s&&m.addEventListener("mouseleave",u),null==d||d.addEventListener("mouseleave",u),l&&m.addEventListener("mousemove",n,{once:!0}),m.addEventListener("mouseenter",n),m.addEventListener("mouseleave",o),()=>{s&&m.removeEventListener("mouseleave",u),null==d||d.removeEventListener("mouseleave",u),l&&m.removeEventListener("mousemove",n),m.removeEventListener("mouseenter",n),m.removeEventListener("mouseleave",o)}):void 0}),[p.domReference,r,t,c,i,l,M,A,a,s,g,v,h,b,f]),d((()=>{s||(y.current=void 0,A(),B(T))}),[s,A]),e.useEffect((()=>()=>{A(),clearTimeout(w.current),clearTimeout(x.current),B(T)}),[r,A]),e.useMemo((()=>{if(!r)return{};function e(e){y.current=e.pointerType}return{reference:{onPointerDown:e,onPointerEnter:e,onMouseMove(){s||0===i||(clearTimeout(x.current),x.current=setTimeout((()=>{I.current||a(!0)}),i))}},floating:{onMouseEnter(){clearTimeout(w.current)},onMouseLeave(){m.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),M(!1)}}}}),[m,r,i,s,a,M])},X=e.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:()=>{},setState:()=>{}}),Y=()=>e.useContext(X),U=t=>{let{children:n,delay:r,timeoutMs:o=0}=t;const[u,c]=e.useState({delay:r,timeoutMs:o,initialDelay:r,currentId:null}),i=e.useCallback((e=>{c((t=>({...t,currentId:e})))}),[]);return e.createElement(X.Provider,{value:e.useMemo((()=>({...u,setState:c,setCurrentId:i})),[u,c,i])},n)},_=(t,n)=>{let{open:r,onOpenChange:o}=t,{id:u}=n;const{currentId:c,initialDelay:i,setState:l,timeoutMs:s}=Y(),a=e.useRef();e.useEffect((()=>{c&&(clearTimeout(a.current),l((e=>({...e,delay:{open:1,close:q(i,"close")}}))),c!==u&&o(!1))}),[u,o,l,c,i]),e.useEffect((()=>{function e(){o(!1),l((e=>({...e,delay:i,currentId:null})))}clearTimeout(a.current),r||c!==u||(s?a.current=window.setTimeout(e,s):e())}),[r,l,c,u,o,i,s]),e.useEffect((()=>()=>{clearTimeout(a.current)}),[])};function Z(){return Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z.apply(this,arguments)}function G(e){let t=e.activeElement;for(;null!=(null==(n=t)||null==(r=n.shadowRoot)?void 0:r.activeElement);){var n,r;t=t.shadowRoot.activeElement}return t}let J=0;function Q(e,t){void 0===t&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:o=!1}=t;r&&cancelAnimationFrame(J);const u=()=>null==e?void 0:e.focus({preventScroll:n});o?u():J=requestAnimationFrame(u)}function $(e){return A(e)&&e.matches("input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])")}function ee(e){e.preventDefault(),e.stopPropagation()}const te=()=>({getShadowRoot:!0,displayCheck:"function"==typeof ResizeObserver&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function ne(e,t){const n=u(e,te());"prev"===t&&n.reverse();const r=n.indexOf(G(k(e)));return n.slice(r+1)[0]}function re(){return ne(document.body,"next")}function oe(){return ne(document.body,"prev")}function ue(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!K(n,r)}function ce(e){u(e,te()).forEach((e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")}))}function ie(e){e.querySelectorAll("[data-tabindex]").forEach((e=>{const t=e.dataset.tabindex;delete e.dataset.tabindex,t?e.setAttribute("tabindex",t):e.removeAttribute("tabindex")}))}const le=e["useInsertionEffect".toString()]||(e=>e());function se(t){const n=e.useRef((()=>{}));return le((()=>{n.current=t})),e.useCallback((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return null==n.current?void 0:n.current(...t)}),[])}const ae={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let fe,de;function me(e){"Tab"===e.key&&(fe=e.target,clearTimeout(de))}const ve=e.forwardRef((function(t,n){const r=se(t.onFocus),[o,u]=e.useState();return d((()=>(P()&&u("button"),document.addEventListener("keydown",me),()=>{document.removeEventListener("keydown",me)})),[]),e.createElement("span",Z({},t,{ref:n,tabIndex:0,role:o,"aria-hidden":!o||void 0,"data-floating-ui-focus-guard":"",style:ae,onFocus:e=>{P()&&D()&&!function(e){const t=fe===e.relatedTarget;return fe=e.relatedTarget,clearTimeout(de),t}(e)?(e.persist(),de=window.setTimeout((()=>{r(e)}),50)):r(e)}}))})),pe=e.createContext(null),ge=function(t){let{id:n,enabled:r=!0}=void 0===t?{}:t;const[o,u]=e.useState(null),c=g(),i=he();return d((()=>{if(!r)return;const e=n?document.getElementById(n):null;if(!e){const e=document.createElement("div");e.id=n||c,e.setAttribute("data-floating-ui-portal",""),u(e);const t=(null==i?void 0:i.portalNode)||document.body;return t.appendChild(e),()=>{t.removeChild(e)}}e.setAttribute("data-floating-ui-portal",""),u(e)}),[n,i,c,r]),o},be=t=>{let{children:n,id:r,root:o=null,preserveTabOrder:u=!0}=t;const i=ge({id:r,enabled:!o}),[l,s]=e.useState(null),a=e.useRef(null),f=e.useRef(null),d=e.useRef(null),m=e.useRef(null),v=!!l&&!l.modal&&!(!o&&!i)&&u;return e.useEffect((()=>{if(i&&u&&(null==l||!l.modal))return i.addEventListener("focusin",e,!0),i.addEventListener("focusout",e,!0),()=>{i.removeEventListener("focusin",e,!0),i.removeEventListener("focusout",e,!0)};function e(e){if(i&&ue(e)){("focusin"===e.type?ie:ce)(i)}}}),[i,u,null==l?void 0:l.modal]),e.createElement(pe.Provider,{value:e.useMemo((()=>({preserveTabOrder:u,beforeOutsideRef:a,afterOutsideRef:f,beforeInsideRef:d,afterInsideRef:m,portalNode:i,setFocusManagerState:s})),[u,i])},v&&i&&e.createElement(ve,{ref:a,onFocus:e=>{if(ue(e,i)){var t;null==(t=d.current)||t.focus()}else{const e=oe()||(null==l?void 0:l.refs.domReference.current);null==e||e.focus()}}}),v&&i&&e.createElement("span",{"aria-owns":i.id,style:ae}),o?c(n,o):i?c(n,i):null,v&&i&&e.createElement(ve,{ref:f,onFocus:e=>{if(ue(e,i)){var t;null==(t=m.current)||t.focus()}else{const e=re()||(null==l?void 0:l.refs.domReference.current);null==e||e.focus(),null==l||l.onOpenChange(!1)}}}))},he=()=>e.useContext(pe),ye=e.forwardRef((function(t,n){return e.createElement("button",Z({},t,{ref:n,tabIndex:-1,style:ae}))}));function we(t){let{context:n,children:r,order:c=["content"],guards:i=!0,initialFocus:l=0,returnFocus:s=!0,modal:a=!0,visuallyHiddenDismiss:f=!1,closeOnFocusOut:m=!0}=t;const{refs:v,nodeId:p,onOpenChange:g,events:b,_:{domReference:h}}=n,y=W(c),w=E(),R=he(),[x,I]=e.useState(null),T="number"==typeof l&&l<0,C=e.useRef(null),M=e.useRef(null),L=e.useRef(!1),O=e.useRef(null),S=null!=R,P=h&&"combobox"===h.getAttribute("role")&&$(h),D=e.useCallback((function(e){return void 0===e&&(e=v.floating.current),e?u(e,te()):[]}),[v]),F=e.useCallback((e=>{const t=D(e);return y.current.map((e=>v.domReference.current&&"reference"===e?v.domReference.current:v.floating.current&&"floating"===e?v.floating.current:t)).filter(Boolean).flat()}),[y,v,D]);e.useEffect((()=>{if(!a)return;function e(e){if("Tab"===e.key){0!==D().length||P||ee(e);const t=F(),n=H(e);"reference"===y.current[0]&&n===v.domReference.current&&(ee(e),e.shiftKey?Q(t[t.length-1]):Q(t[1])),"floating"===y.current[1]&&n===v.floating.current&&e.shiftKey&&(ee(e),Q(t[0]))}}const t=k(v.floating.current);return t.addEventListener("keydown",e),()=>{t.removeEventListener("keydown",e)}}),[a,y,v,P,D,F]),e.useEffect((()=>{if(!m)return;const e=v.floating.current,t=v.domReference.current;let n=!1;function r(){n=!0,setTimeout((()=>{n=!1}))}function o(r){const o=r.relatedTarget,u=!(K(t,o)||K(e,o)||K(o,e)||K(null==R?void 0:R.portalNode,o)||null!=o&&o.hasAttribute("data-floating-ui-focus-guard")||w&&(N(w.nodesRef.current,p).find((e=>{var t,n;return K(null==(t=e.context)?void 0:t.refs.floating.current,o)||K(null==(n=e.context)?void 0:n.refs.domReference.current,o)}))||function(e,t){var n;let r=[],o=null==(n=e.find((e=>e.id===t)))?void 0:n.parentId;for(;o;){const t=e.find((e=>e.id===o));o=null==t?void 0:t.parentId,t&&(r=r.concat(t))}return r}(w.nodesRef.current,p).find((e=>{var t,n;return(null==(t=e.context)?void 0:t.refs.floating.current)===o||(null==(n=e.context)?void 0:n.refs.domReference.current)===o}))));o&&u&&!n&&o!==O.current&&(L.current=!0,setTimeout((()=>g(!1))))}return e&&A(t)?(t.addEventListener("focusout",o),t.addEventListener("pointerdown",r),!a&&e.addEventListener("focusout",o),()=>{t.removeEventListener("focusout",o),t.removeEventListener("pointerdown",r),!a&&e.removeEventListener("focusout",o)}):void 0}),[a,p,w,v,R,g,m]),e.useEffect((()=>{var e;const t=v.floating.current,n=v.domReference.current,r=Array.from((null==R||null==(e=R.portalNode)?void 0:e.querySelectorAll("[data-floating-ui-portal]"))||[]);if(t&&A(n)&&a){const e=[t,...r,...[C.current,M.current].filter(Boolean)],u=o(y.current.includes("reference")||P?e.concat(n):e);return()=>{u()}}}),[a,y,R,v,P]),e.useEffect((()=>{const e=v.floating.current;if(a&&!i&&e){const t=[],n=te(),r=u(k(e).body,n),o=F(),c=r.filter((e=>!o.includes(e)));return c.forEach(((e,n)=>{t[n]=e.getAttribute("tabindex"),e.setAttribute("tabindex","-1")})),()=>{c.forEach(((e,n)=>{const r=t[n];null==r?e.removeAttribute("tabindex"):e.setAttribute("tabindex",r)}))}}}),[a,i,v,F]),d((()=>{const e=v.floating.current;if(!e)return;const t=k(e);let n=s,r=!1;const o=G(t);O.current=o;const u=F(e),c=("number"==typeof l?u[l]:l.current)||e;function i(e){if("escapeKey"===e.type&&v.domReference.current&&(O.current=v.domReference.current),["referencePress","escapeKey"].includes(e.type))return;const t=e.data.returnFocus;"object"==typeof t?(n=!0,r=t.preventScroll):n=t}return!T&&Q(c,{preventScroll:c===e}),b.on("dismiss",i),()=>{var o;(b.off("dismiss",i),K(e,G(t))&&v.domReference.current&&(O.current=v.domReference.current),n&&A(O.current)&&!L.current)&&(v.domReference.current?null==(o=O.current)||o.focus({preventScroll:r}):Q(O.current,{cancelPrevious:!1,preventScroll:r}))}}),[F,l,s,v,b,T]),d((()=>{if(R)return R.setFocusManagerState({...n,modal:a}),()=>{R.setFocusManagerState(null)}}),[R,a,n]),d((()=>{const e=v.floating.current;if(!T&&e&&(t(),"function"==typeof MutationObserver)){const n=new MutationObserver(t);return n.observe(e,{childList:!0,subtree:!0}),()=>{n.disconnect()}}function t(){I(D().length)}}),[D,T,v]);const j=i&&(S||a)&&!P;function B(t){return f&&a?e.createElement(ye,{ref:"start"===t?C:M,onClick:()=>g(!1)},"string"==typeof f?f:"Dismiss"):null}return e.createElement(e.Fragment,null,j&&e.createElement(ve,{ref:null==R?void 0:R.beforeInsideRef,onFocus:e=>{if(a){const e=F();Q("reference"===c[0]?e[0]:e[e.length-1])}else if(null!=R&&R.preserveTabOrder&&R.portalNode)if(L.current=!1,ue(e,R.portalNode)){const e=re()||h;null==e||e.focus()}else{var t;null==(t=R.beforeOutsideRef.current)||t.focus()}}}),P?null:B("start"),e.cloneElement(r,0===x||c.includes("floating")?{tabIndex:0}:{}),B("end"),j&&e.createElement(ve,{ref:null==R?void 0:R.afterInsideRef,onFocus:e=>{if(a)Q(F()[0]);else if(null!=R&&R.preserveTabOrder&&R.portalNode)if(L.current=!0,ue(e,R.portalNode)){const e=oe()||h;null==e||e.focus()}else{var t;null==(t=R.afterOutsideRef.current)||t.focus()}}}))}const Ee="data-floating-ui-scroll-lock",Re=e.forwardRef((function(t,n){let{lockScroll:r=!1,...o}=t;return d((()=>{var e,t;if(!r)return;if(document.body.hasAttribute(Ee))return;document.body.setAttribute(Ee,"");const n=Math.round(document.documentElement.getBoundingClientRect().left)+document.documentElement.scrollLeft?"paddingLeft":"paddingRight",o=window.innerWidth-document.documentElement.clientWidth;if(!/iP(hone|ad|od)|iOS/.test(T()))return Object.assign(document.body.style,{overflow:"hidden",[n]:o+"px"}),()=>{document.body.removeAttribute(Ee),Object.assign(document.body.style,{overflow:"",[n]:""})};const u=(null==(e=window.visualViewport)?void 0:e.offsetLeft)||0,c=(null==(t=window.visualViewport)?void 0:t.offsetTop)||0,i=window.pageXOffset,l=window.pageYOffset;return Object.assign(document.body.style,{position:"fixed",overflow:"hidden",top:-(l-Math.floor(c))+"px",left:-(i-Math.floor(u))+"px",right:"0",[n]:o+"px"}),()=>{Object.assign(document.body.style,{position:"",overflow:"",top:"",left:"",right:"",[n]:""}),document.body.removeAttribute(Ee),window.scrollTo(i,l)}}),[r]),e.createElement("div",Z({ref:n},o,{style:{position:"fixed",overflow:"auto",top:0,right:0,bottom:0,left:0,...o.style}}))}));function xe(e){return A(e.target)&&"BUTTON"===e.target.tagName}function Ie(e){return $(e)}const ke=function(t,n){let{open:r,onOpenChange:o,dataRef:u,refs:c}=t,{enabled:i=!0,event:l="click",toggle:s=!0,ignoreMouse:a=!1,keyboardHandlers:f=!0}=void 0===n?{}:n;const d=e.useRef();return e.useMemo((()=>i?{reference:{onPointerDown(e){d.current=e.pointerType},onMouseDown(e){0===e.button&&(F(d.current,!0)&&a||"click"!==l&&(r?!s||u.current.openEvent&&"mousedown"!==u.current.openEvent.type||o(!1):(e.preventDefault(),o(!0)),u.current.openEvent=e.nativeEvent))},onClick(e){"mousedown"===l&&d.current?d.current=void 0:F(d.current,!0)&&a||(r?!s||u.current.openEvent&&"click"!==u.current.openEvent.type||o(!1):o(!0),u.current.openEvent=e.nativeEvent)},onKeyDown(e){d.current=void 0,f&&(xe(e)||(" "!==e.key||Ie(c.domReference.current)||e.preventDefault(),"Enter"===e.key&&(r?s&&o(!1):o(!0))))},onKeyUp(e){f&&(xe(e)||Ie(c.domReference.current)||" "===e.key&&(r?s&&o(!1):o(!0)))}}}:{}),[i,u,l,a,f,c,s,r,o])};function Te(e,t){if(null==t)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return null!=n.target&&t.contains(n.target)}const Ce={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},Me={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Le=function(t,n){let{open:r,onOpenChange:o,refs:u,events:c,nodeId:i}=t,{enabled:s=!0,escapeKey:a=!0,outsidePress:f=!0,outsidePressEvent:d="pointerdown",referencePress:m=!1,referencePressEvent:v="pointerdown",ancestorScroll:p=!1,bubbles:g=!0}=void 0===n?{}:n;const b=E(),h=null!=w(),y=se("function"==typeof f?f:()=>!1),R="function"==typeof f?y:f,x=e.useRef(!1),{escapeKeyBubbles:I,outsidePressBubbles:T}=function(e){var t,n;return void 0===e&&(e=!0),{escapeKeyBubbles:"boolean"==typeof e?e:null==(t=e.escapeKey)||t,outsidePressBubbles:"boolean"==typeof e?e:null==(n=e.outsidePress)||n}}(g);return e.useEffect((()=>{if(!r||!s)return;function e(e){if("Escape"===e.key){if(!I&&b&&N(b.nodesRef.current,i).length>0)return;c.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),o(!1)}}function t(e){const t=x.current;if(x.current=!1,t)return;if("function"==typeof R&&!R(e))return;const n=H(e);if(L(n)&&u.floating.current){const t=u.floating.current.ownerDocument.defaultView||window,r=n.scrollWidth>n.clientWidth,o=n.scrollHeight>n.clientHeight;let c=o&&e.offsetX>n.clientWidth;if(o){"rtl"===t.getComputedStyle(n).direction&&(c=e.offsetX<=n.offsetWidth-n.clientWidth)}if(c||r&&e.offsetY>n.clientHeight)return}const r=b&&N(b.nodesRef.current,i).some((t=>{var n;return Te(e,null==(n=t.context)?void 0:n.refs.floating.current)}));Te(e,u.floating.current)||Te(e,u.domReference.current)||r||!T&&b&&N(b.nodesRef.current,i).length>0||(c.emit("dismiss",{type:"outsidePress",data:{returnFocus:h?{preventScroll:!0}:O(e)||S(e)}}),o(!1))}function n(){o(!1)}const f=k(u.floating.current);a&&f.addEventListener("keydown",e),R&&f.addEventListener(d,t);let m=[];return p&&(L(u.domReference.current)&&(m=l(u.domReference.current)),L(u.floating.current)&&(m=m.concat(l(u.floating.current))),!L(u.reference.current)&&u.reference.current&&u.reference.current.contextElement&&(m=m.concat(l(u.reference.current.contextElement)))),m=m.filter((e=>{var t;return e!==(null==(t=f.defaultView)?void 0:t.visualViewport)})),m.forEach((e=>{e.addEventListener("scroll",n,{passive:!0})})),()=>{a&&f.removeEventListener("keydown",e),R&&f.removeEventListener(d,t),m.forEach((e=>{e.removeEventListener("scroll",n)}))}}),[a,R,d,c,b,i,r,o,p,s,I,T,u,h]),e.useEffect((()=>{x.current=!1}),[R,d]),e.useMemo((()=>s?{reference:{[Ce[v]]:()=>{m&&(c.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),o(!1))}},floating:{[Me[d]]:()=>{x.current=!0}}}:{}),[s,c,m,d,v,o])},Ae=function(t,n){let{open:r,onOpenChange:o,dataRef:u,refs:c,events:i}=t,{enabled:l=!0,keyboardOnly:s=!0}=void 0===n?{}:n;const a=e.useRef(""),f=e.useRef(!1),d=e.useRef();return e.useEffect((()=>{if(!l)return;const e=k(c.floating.current).defaultView||window;function t(){!r&&A(c.domReference.current)&&c.domReference.current===G(k(c.domReference.current))&&(f.current=!0)}return e.addEventListener("blur",t),()=>{e.removeEventListener("blur",t)}}),[c,r,l]),e.useEffect((()=>{if(l)return i.on("dismiss",e),()=>{i.off("dismiss",e)};function e(e){"referencePress"!==e.type&&"escapeKey"!==e.type||(f.current=!0)}}),[i,l]),e.useEffect((()=>()=>{clearTimeout(d.current)}),[]),e.useMemo((()=>l?{reference:{onPointerDown(e){let{pointerType:t}=e;a.current=t,f.current=!(!t||!s)},onMouseLeave(){f.current=!1},onFocus(e){var t;f.current||"focus"===e.type&&"mousedown"===(null==(t=u.current.openEvent)?void 0:t.type)&&u.current.openEvent&&Te(u.current.openEvent,c.domReference.current)||(u.current.openEvent=e.nativeEvent,o(!0))},onBlur(e){f.current=!1;const t=e.relatedTarget,n=L(t)&&t.hasAttribute("data-floating-ui-focus-guard");d.current=setTimeout((()=>{K(c.floating.current,t)||K(c.domReference.current,t)||n||o(!1)}))}}}:{}),[l,s,c,u,o])};let Oe=!1;function Se(e,t,n){return Math.floor(e/t)!==n}function Pe(e,t){return t<0||t>=e.current.length}function De(e,t){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:o,amount:u=1}=void 0===t?{}:t;const c=e.current;let i=n;do{var l,s;i+=r?-u:u}while(i>=0&&i<=c.length-1&&(o?o.includes(i):null==c[i]||(null==(l=c[i])?void 0:l.hasAttribute("disabled"))||"true"===(null==(s=c[i])?void 0:s.getAttribute("aria-disabled"))));return i}function Fe(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function Ke(e,t){return Fe(t,"ArrowUp"===e||"ArrowDown"===e,"ArrowLeft"===e||"ArrowRight"===e)}function Ne(e,t,n){return Fe(t,"ArrowDown"===e,n?"ArrowLeft"===e:"ArrowRight"===e)||"Enter"===e||" "==e||""===e}function He(e,t){return De(e,{disabledIndices:t})}function je(e,t){return De(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}const Be=function(t,n){let{open:r,onOpenChange:o,refs:u}=t,{listRef:c,activeIndex:l,onNavigate:s=(()=>{}),enabled:a=!0,selectedIndex:f=null,allowEscape:m=!1,loop:v=!1,nested:p=!1,rtl:g=!1,virtual:b=!1,focusItemOnOpen:h="auto",focusItemOnHover:y=!0,openOnArrowKeyDown:R=!0,disabledIndices:x,orientation:I="vertical",cols:T=1,scrollItemIntoView:C=!0}=void 0===n?{listRef:{current:[]},activeIndex:null,onNavigate:()=>{}}:n;const M=w(),L=E(),F=se(s),N=e.useRef(h),H=e.useRef(null!=f?f:-1),j=e.useRef(null),B=e.useRef(!0),V=e.useRef(F),q=e.useRef(r),z=e.useRef(!1),X=W(x),Y=W(r),U=W(C),[_,Z]=e.useState(),J=e.useCallback(((e,t)=>{const n=e.current[t.current];b?Z(null==n?void 0:n.id):Q(n,{preventScroll:!0,sync:!(!D()||!P())&&(Oe||z.current)}),requestAnimationFrame((()=>{const e=U.current;e&&n&&!B.current&&(null==n.scrollIntoView||n.scrollIntoView("boolean"==typeof e?{block:"nearest",inline:"nearest"}:e))}))}),[b,U]);return d((()=>{document.createElement("div").focus({get preventScroll(){return Oe=!0,!1}})}),[]),d((()=>{a&&(r?N.current&&null!=f&&F(f):q.current&&(H.current=-1,V.current(null)))}),[a,r,f,F]),d((()=>{if(a&&r)if(null==l){if(z.current=!1,null!=f)return;q.current&&(H.current=-1,J(c,H)),!q.current&&N.current&&(null!=j.current||!0===N.current&&null==j.current)&&(H.current=null==j.current||Ne(j.current,I,g)||p?He(c,X.current):je(c,X.current),F(H.current))}else Pe(c,l)||(H.current=l,J(c,H))}),[a,r,l,f,p,c,I,g,F,J,X]),d((()=>{if(a&&q.current&&!r){var e,t;const n=null==L||null==(e=L.nodesRef.current.find((e=>e.id===M)))||null==(t=e.context)?void 0:t.refs.floating.current;n&&!K(n,G(k(n)))&&n.focus({preventScroll:!0})}}),[a,r,L,M]),d((()=>{j.current=null,V.current=F,q.current=r})),e.useMemo((()=>{if(!a)return{};const e=X.current;function t(t){if(B.current=!1,z.current=!0,!Y.current&&t.currentTarget===u.floating.current)return;if(p&&function(e,t,n){return Fe(t,n?"ArrowRight"===e:"ArrowLeft"===e,"ArrowUp"===e)}(t.key,I,g))return ee(t),o(!1),void(A(u.domReference.current)&&u.domReference.current.focus());const n=H.current,i=He(c,e),l=je(c,e);if("Home"===t.key&&(H.current=i,F(H.current)),"End"===t.key&&(H.current=l,F(H.current)),T>1){const n=H.current;if("ArrowUp"===t.key){if(ee(t),-1===n)H.current=l;else if(H.current=De(c,{startingIndex:n,amount:T,decrement:!0,disabledIndices:e}),v&&(n-T<i||H.current<0)){const e=n%T,t=l%T,r=l-(t-e);H.current=t===e?l:t>e?r:r-T}Pe(c,H.current)&&(H.current=n),F(H.current)}if("ArrowDown"===t.key&&(ee(t),-1===n?H.current=i:(H.current=De(c,{startingIndex:n,amount:T,disabledIndices:e}),v&&n+T>l&&(H.current=De(c,{startingIndex:n%T-T,amount:T,disabledIndices:e}))),Pe(c,H.current)&&(H.current=n),F(H.current)),"both"===I){const r=Math.floor(n/T);"ArrowRight"===t.key&&(ee(t),n%T!=T-1?(H.current=De(c,{startingIndex:n,disabledIndices:e}),v&&Se(H.current,T,r)&&(H.current=De(c,{startingIndex:n-n%T-1,disabledIndices:e}))):v&&(H.current=De(c,{startingIndex:n-n%T-1,disabledIndices:e})),Se(H.current,T,r)&&(H.current=n)),"ArrowLeft"===t.key&&(ee(t),n%T!=0?(H.current=De(c,{startingIndex:n,disabledIndices:e,decrement:!0}),v&&Se(H.current,T,r)&&(H.current=De(c,{startingIndex:n+(T-n%T),decrement:!0,disabledIndices:e}))):v&&(H.current=De(c,{startingIndex:n+(T-n%T),decrement:!0,disabledIndices:e})),Se(H.current,T,r)&&(H.current=n));const o=Math.floor(l/T)===r;return Pe(c,H.current)&&(H.current=v&&o?"ArrowLeft"===t.key?l:De(c,{startingIndex:n-n%T-1,disabledIndices:e}):n),void F(H.current)}}if(Ke(t.key,I)){if(ee(t),r&&!b&&G(t.currentTarget.ownerDocument)===t.currentTarget)return H.current=Ne(t.key,I,g)?i:l,void F(H.current);Ne(t.key,I,g)?H.current=v?n>=l?m&&n!==c.current.length?-1:i:De(c,{startingIndex:n,disabledIndices:e}):Math.min(l,De(c,{startingIndex:n,disabledIndices:e})):H.current=v?n<=i?m&&-1!==n?c.current.length:l:De(c,{startingIndex:n,decrement:!0,disabledIndices:e}):Math.max(i,De(c,{startingIndex:n,decrement:!0,disabledIndices:e})),Pe(c,H.current)?F(null):F(H.current)}}function n(e){"auto"===h&&O(e.nativeEvent)&&(N.current=!0)}return{reference:{...b&&r&&null!=l&&{"aria-activedescendant":_},onKeyDown(n){B.current=!1;const u=0===n.key.indexOf("Arrow");if(b&&r)return t(n);if(!r&&!R&&u)return;(u||"Enter"===n.key||" "===n.key||""===n.key)&&(j.current=n.key),p?function(e,t,n){return Fe(t,n?"ArrowLeft"===e:"ArrowRight"===e,"ArrowDown"===e)}(n.key,I,g)&&(ee(n),r?(H.current=He(c,e),F(H.current)):o(!0)):Ke(n.key,I)&&(null!=f&&(H.current=f),ee(n),!r&&R?o(!0):t(n),r&&F(H.current))},onFocus(){r&&F(null)},onPointerDown:function(e){N.current=h,"auto"===h&&S(e.nativeEvent)&&(N.current=!0)},onMouseDown:n,onClick:n},floating:{"aria-orientation":"both"===I?void 0:I,...b&&null!=l&&{"aria-activedescendant":_},onKeyDown:t,onPointerMove(){B.current=!0}},item:{onFocus(e){let{currentTarget:t}=e;const n=c.current.indexOf(t);-1!==n&&l!==n&&F(n)},onClick:e=>{let{currentTarget:t}=e;return t.focus({preventScroll:!0})},...y&&{onMouseMove(e){let{currentTarget:t}=e;const n=t;if(n){const e=c.current.indexOf(n);-1!==e&&l!==e&&F(e)}},onPointerLeave(){var e;B.current&&(H.current=-1,J(c,H),i((()=>F(null))),b||null==(e=u.floating.current)||e.focus({preventScroll:!0}))}}}}}),[_,X,Y,c,a,I,g,b,r,l,p,f,R,y,m,T,v,u,h,J,F,o])};function Ve(t){return e.useMemo((()=>t.every((e=>null==e))?null:e=>{t.forEach((t=>{"function"==typeof t?t(e):null!=t&&(t.current=e)}))}),t)}const We=function(t,n){let{open:r}=t,{enabled:o=!0,role:u="dialog"}=void 0===n?{}:n;const c=g(),i=g();return e.useMemo((()=>{const e={id:c,role:u};return o?"tooltip"===u?{reference:{"aria-describedby":r?c:void 0},floating:e}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":"alertdialog"===u?"dialog":u,"aria-controls":r?c:void 0,..."listbox"===u&&{role:"combobox"},..."menu"===u&&{id:i}},floating:{...e,..."menu"===u&&{"aria-labelledby":i}}}:{}}),[o,u,r,c,i])},qe=e=>e.replace(/[A-Z]+(?![a-z])|[A-Z]/g,((e,t)=>(t?"-":"")+e.toLowerCase()));function ze(t,n){let{open:r,refs:o}=t,{duration:u=250}=void 0===n?{}:n;const c=("number"==typeof u?u:u.close)||0,[i,l]=e.useState(!1),[s,a]=e.useState("unmounted"),f=function(t,n){const[r,o]=e.useState(t);return t&&!r&&o(!0),e.useEffect((()=>{if(!t){const e=setTimeout((()=>o(!1)),n);return()=>clearTimeout(e)}}),[t,n]),r}(r,c);return i&&!f&&"unmounted"!==s&&a("unmounted"),d((()=>{if(o.floating.current){if(r){a("initial");const e=requestAnimationFrame((()=>{a("open")}));return()=>{cancelAnimationFrame(e)}}l(!0),a("close")}}),[r,o]),{isMounted:f,status:s}}function Xe(t,n){let{initial:r={opacity:0},open:o,close:u,common:c,duration:i=250}=void 0===n?{}:n;const l=t.placement,s=l.split("-")[0],[a,f]=e.useState({}),{isMounted:m,status:v}=ze(t,{duration:i}),p=W(r),g=W(o),b=W(u),h=W(c),y="number"==typeof i,w=(y?i:i.open)||0,E=(y?i:i.close)||0;return d((()=>{const e={side:s,placement:l},t=p.current,n=b.current,r=g.current,o=h.current,u="function"==typeof t?t(e):t,c="function"==typeof n?n(e):n,i="function"==typeof o?o(e):o,a=("function"==typeof r?r(e):r)||Object.keys(u).reduce(((e,t)=>(e[t]="",e)),{});if("initial"===v&&f((e=>({transitionProperty:e.transitionProperty,...i,...u}))),"open"===v&&f({transitionProperty:Object.keys(a).map(qe).join(","),transitionDuration:w+"ms",...i,...a}),"close"===v){const e=c||u;f({transitionProperty:Object.keys(e).map(qe).join(","),transitionDuration:E+"ms",...i,...e})}}),[s,l,E,b,p,g,h,w,v]),{isMounted:m,styles:a}}const Ye=function(t,n){var r;let{open:o,dataRef:u}=t,{listRef:c,activeIndex:i,onMatch:l=(()=>{}),enabled:s=!0,findMatch:a=null,resetMs:f=1e3,ignoreKeys:m=[],selectedIndex:v=null}=void 0===n?{listRef:{current:[]},activeIndex:null}:n;const p=e.useRef(),g=e.useRef(""),b=e.useRef(null!=(r=null!=v?v:i)?r:-1),h=e.useRef(null),y=se(l),w=W(a),E=W(m);return d((()=>{o&&(clearTimeout(p.current),h.current=null,g.current="")}),[o]),d((()=>{var e;o&&""===g.current&&(b.current=null!=(e=null!=v?v:i)?e:-1)}),[o,v,i]),e.useMemo((()=>{if(!s)return{};function e(e){const t=H(e.nativeEvent);if(L(t)&&G(k(t))!==e.currentTarget&&t.closest('[role="dialog"],[role="menu"],[role="listbox"],[role="tree"],[role="grid"]')!==e.currentTarget)return;g.current.length>0&&" "!==g.current[0]&&(u.current.typing=!0," "===e.key&&ee(e));const n=c.current;if(null==n||E.current.includes(e.key)||1!==e.key.length||e.ctrlKey||e.metaKey||e.altKey)return;n.every((e=>{var t,n;return!e||(null==(t=e[0])?void 0:t.toLocaleLowerCase())!==(null==(n=e[1])?void 0:n.toLocaleLowerCase())}))&&g.current===e.key&&(g.current="",b.current=h.current),g.current+=e.key,clearTimeout(p.current),p.current=setTimeout((()=>{g.current="",b.current=h.current,u.current.typing=!1}),f);const r=b.current,o=[...n.slice((r||0)+1),...n.slice(0,(r||0)+1)],i=w.current?w.current(o,g.current):o.find((e=>0===(null==e?void 0:e.toLocaleLowerCase().indexOf(g.current.toLocaleLowerCase())))),l=i?n.indexOf(i):-1;-1!==l&&(y(l),h.current=l)}return{reference:{onKeyDown:e},floating:{onKeyDown:e}}}),[s,u,c,f,E,w,y])};function Ue(e,t){return{...e,rects:{...e.rects,floating:{...e.rects.floating,height:t}}}}const _e=e=>({name:"inner",options:e,async fn(t){const{listRef:n,overflowRef:r,onFallbackChange:o,offset:u=0,index:c=0,minItemsVisible:l=4,referenceOverflowThreshold:f=0,scrollRef:d,...m}=e,{rects:v,elements:{floating:p}}=t,g=n.current[c];if(!g)return{};const b={...t,...await s(-g.offsetTop-v.reference.height/2-g.offsetHeight/2-u).fn(t)},h=(null==d?void 0:d.current)||p,y=await a(Ue(b,h.scrollHeight),m),w=await a(b,{...m,elementContext:"reference"}),E=Math.max(0,y.top),R=b.y+E,x=Math.max(0,h.scrollHeight-E-Math.max(0,y.bottom));return h.style.maxHeight=x+"px",h.scrollTop=E,o&&(h.offsetHeight<g.offsetHeight*Math.min(l,n.current.length-1)-1||w.top>=-f||w.bottom>=-f?i((()=>o(!0))):i((()=>o(!1)))),r&&(r.current=await a(Ue({...b,y:R},h.offsetHeight),m)),{y:R}}}),Ze=(t,n)=>{let{open:r,refs:o}=t,{enabled:u=!0,overflowRef:c,scrollRef:l,onChange:s}=n;const a=se(s),f=e.useRef(!1),d=e.useRef(null),m=e.useRef(null);return e.useEffect((()=>{if(!u)return;function e(e){if(e.ctrlKey||!t||null==c.current)return;const n=e.deltaY,r=c.current.top>=-.5,o=c.current.bottom>=-.5,u=t.scrollHeight-t.clientHeight,l=n<0?-1:1,s=n<0?"max":"min";t.scrollHeight<=t.clientHeight||(!r&&n>0||!o&&n<0?(e.preventDefault(),i((()=>{a((e=>e+Math[s](n,u*l)))}))):/firefox/i.test(C())&&(t.scrollTop+=n))}const t=(null==l?void 0:l.current)||o.floating.current;return r&&t?(t.addEventListener("wheel",e),requestAnimationFrame((()=>{d.current=t.scrollTop,null!=c.current&&(m.current={...c.current})})),()=>{d.current=null,m.current=null,t.removeEventListener("wheel",e)}):void 0}),[u,r,o,c,l,a]),e.useMemo((()=>u?{floating:{onKeyDown(){f.current=!0},onWheel(){f.current=!1},onPointerMove(){f.current=!1},onScroll(){const e=(null==l?void 0:l.current)||o.floating.current;if(c.current&&e&&f.current){if(null!==d.current){const t=e.scrollTop-d.current;(c.current.bottom<-.5&&t<-1||c.current.top<-.5&&t>1)&&i((()=>a((e=>e+t))))}requestAnimationFrame((()=>{d.current=e.scrollTop}))}}}}:{}),[u,c,o,l,a])};function Ge(t){let{open:n=!1,onOpenChange:r,whileElementsMounted:o,placement:u,middleware:c,strategy:i,nodeId:l}=void 0===t?{}:t;const[s,a]=e.useState(null),m=E(),v=e.useRef(null),p=e.useRef({}),g=e.useState((()=>b()))[0],h=f({open:n,placement:u,middleware:c,strategy:i,whileElementsMounted:o}),y=se(r),w=e.useMemo((()=>({...h.refs,domReference:v})),[h.refs]),R=e.useMemo((()=>({...h,refs:w,dataRef:p,nodeId:l,events:g,open:n,onOpenChange:y,_:{domReference:s}})),[h,l,g,n,y,w,s]);d((()=>{const e=null==m?void 0:m.nodesRef.current.find((e=>e.id===l));e&&(e.context=R)}));const{reference:x}=h,I=e.useCallback((e=>{(L(e)||null===e)&&(w.domReference.current=e,a(e)),(L(w.reference.current)||null===w.reference.current||null!==e&&!L(e))&&x(e)}),[x,w]),k=e.useCallback((e=>{const t=L(e)?{getBoundingClientRect:()=>e.getBoundingClientRect(),contextElement:e}:e;x(t)}),[x]);return e.useMemo((()=>({...h,context:R,refs:w,reference:I,positionReference:k})),[h,w,R,I,k])}function Je(e,t,n){const r=new Map;return{..."floating"===n&&{tabIndex:-1},...e,...t.map((e=>e?e[n]:null)).concat(e).reduce(((e,t)=>t?(Object.entries(t).forEach((t=>{let[n,o]=t;var u;0===n.indexOf("on")?(r.has(n)||r.set(n,[]),"function"==typeof o&&(null==(u=r.get(n))||u.push(o),e[n]=function(){for(var e,t=arguments.length,o=new Array(t),u=0;u<t;u++)o[u]=arguments[u];null==(e=r.get(n))||e.forEach((e=>e(...o)))})):e[n]=o})),e):e),{})}}const Qe=function(t){void 0===t&&(t=[]);const n=t,r=e.useCallback((e=>Je(e,t,"reference")),n),o=e.useCallback((e=>Je(e,t,"floating")),n),u=e.useCallback((e=>Je(e,t,"item")),n);return e.useMemo((()=>({getReferenceProps:r,getFloatingProps:o,getItemProps:u})),[r,o,u])};export{U as FloatingDelayGroup,we as FloatingFocusManager,x as FloatingNode,Re as FloatingOverlay,be as FloatingPortal,I as FloatingTree,_e as inner,V as safePolygon,ke as useClick,_ as useDelayGroup,Y as useDelayGroupContext,Le as useDismiss,Ge as useFloating,R as useFloatingNodeId,w as useFloatingParentNodeId,ge as useFloatingPortalNode,E as useFloatingTree,Ae as useFocus,z as useHover,g as useId,Ze as useInnerOffset,Qe as useInteractions,Be as useListNavigation,Ve as useMergeRefs,We as useRole,ze as useTransitionStatus,Xe as useTransitionStyles,Ye as useTypeahead};
